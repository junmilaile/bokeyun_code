import{D as e,aj as a,v as t,o,c as s,w as i,l,g as n,b as r,t as d,j as u,k as c,F as m,f as _,r as f,i as p}from"./index-6f7f74a6.js";import{_ as h,a as b}from"./uni-list.845fc667.js";import{r as g}from"./uni-app.es.6c04d0ca.js";import{_ as k}from"./uni-load-more.fbd5f83d.js";import{_ as j}from"./unicloud-db.b431eb50.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.bcdec7e2.js";const y=e.database();const C=w({data:()=>({collectionList:[y.collection("quanzi_aticle").field("user_id,category_id,title,description,province,content,article_status,last_comment_user_id,picurls,publish_date,last_modify_date").getTemp(),y.collection("opendb-news-categories").field("name as text, _id").getTemp()],loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{a()}))},onReachBottom(){this.$refs.udb.loadMore()},methods:{handleItemClick(e){t({url:"/pages/detail/detail?id="+e})},fabClick(){t({url:"./add",events:{refreshData:()=>{this.$refs.udb.loadData({clear:!0})}}})}}},[["render",function(e,a,t,w,y,C){const v=l,D=p,x=g(f("uni-list-item"),h),M=g(f("uni-list"),b),$=g(f("uni-load-more"),k),T=g(f("unicloud-db"),j);return o(),s(v,{class:"container"},{default:i((()=>[n(T,{ref:"udb",where:"user_id == $cloudEnv_uid",orderby:"publish_date desc",collection:"quanzi_aticle"},{default:i((({data:e,pagination:a,loading:t,hasMore:l,error:f})=>[f?(o(),s(v,{key:0},{default:i((()=>[r(d(f.message),1)])),_:2},1024)):e?(o(),s(v,{key:1},{default:i((()=>[n(M,null,{default:i((()=>[(o(!0),u(m,null,c(e,((e,a)=>(o(),s(x,{key:a,showArrow:"",clickable:!0,onClick:a=>C.handleItemClick(e._id)},{body:i((()=>[n(D,null,{default:i((()=>[r(d(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):_("",!0),n($,{status:t?"loading":l?"more":"noMore"},null,8,["status"])])),_:1},512)])),_:1})}]]);export{C as default};
