import{D as e,aj as o,v as a,C as t,o as l,c as n,w as i,l as s,g as r,b as d,t as u,j as c,k as m,F as f,f as p,J as _,r as b,i as g}from"./index-6f7f74a6.js";import{_ as k,a as h}from"./uni-list.845fc667.js";import{r as j}from"./uni-app.es.6c04d0ca.js";import{_ as C}from"./uni-load-more.fbd5f83d.js";import{_ as y}from"./unicloud-db.b431eb50.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.bcdec7e2.js";const D=e.database();const x=w({data:()=>({collectionList:[D.collection("opendb-feedback").field("user_id,content,imgs,contact,mobile,_id").getTemp(),D.collection("uni-id-users").field("_id,nickname,username").getTemp()],loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}),onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{o()}))},onReachBottom(){this.$refs.udb.loadMore()},methods:{gologin(){a({url:"/"+t.uniIdRouter.loginPage})},handleItemClick(e){a({url:"./detail?id="+e})},fabClick(){a({url:"./opendb-feedback",events:{refreshData:()=>{this.$refs.udb.loadData({clear:!0})}}})}}},[["render",function(e,o,a,t,w,D){const x=_,M=s,v=g,I=j(b("uni-list-item"),k),R=j(b("uni-list"),h),T=j(b("uni-load-more"),C),$=j(b("unicloud-db"),y);return l(),n(M,{class:"container"},{default:i((()=>[r($,{ref:"udb",collection:w.collectionList},{default:i((({data:e,pagination:o,loading:a,hasMore:t,error:s})=>[s?(l(),n(M,{key:0},{default:i((()=>[d(u(s)+" ",1),r(x,{type:"primary",style:{"margin-top":"20rpx",width:"50%"},onClick:D.gologin},{default:i((()=>[d("请登录")])),_:1},8,["onClick"])])),_:2},1024)):e?(l(),n(M,{key:1},{default:i((()=>[r(R,null,{default:i((()=>[(l(!0),c(f,null,m(e,((e,o)=>(l(),n(I,{key:o,showArrow:"",clickable:!0,onClick:o=>D.handleItemClick(e._id)},{body:i((()=>[r(v,null,{default:i((()=>[d(u(e.user_id[0].username)+"发布： "+u(e.content),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1024)):p("",!0),r(T,{status:a?"loading":t?"more":"noMore"},null,8,["status"])])),_:1},8,["collection"])])),_:1})}]]);export{x as default};
