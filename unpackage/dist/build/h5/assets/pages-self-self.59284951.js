import{D as a,I as l,q as e,o as s,c as t,w as A,l as c,g as u,u as i,b as o,t as n,B as f,z as d,v as r,E as m,r as I,i as g}from"./index-6f7f74a6.js";import{_ as p}from"./uni-dateformat.3d3c3185.js";import{o as _,r as k}from"./uni-app.es.6c04d0ca.js";import{s as x,m as Q}from"./store.a70c5c24.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const M="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMsaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0OCA3OS4xNjQwMzYsIDIwMTkvMDgvMTMtMDE6MDY6NTcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMS4wIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMjFDQzJGQUVCQzUxMUVDOTZDOUIyNzMxNjE3N0JEMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMjFDQzJGQkVCQzUxMUVDOTZDOUIyNzMxNjE3N0JEMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQyMUNDMkY4RUJDNTExRUM5NkM5QjI3MzE2MTc3QkQxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQyMUNDMkY5RUJDNTExRUM5NkM5QjI3MzE2MTc3QkQxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgG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",Z=b({__name:"self",setup(b){_((()=>{H()}));const Z=a.database(),y=l((()=>x.hasLogin)),N=l((()=>x.userInfo)),v=e({artNum:0,likeNum:0,comment:0}),D=()=>{E()||f({title:"是否确认退出？",success:a=>{console.log(a),a.confirm&&Q.logout()}})},E=()=>!y.value&&(d({title:"未登录",icon:"none"}),!0),z=()=>{r({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},B=()=>{E()||r({url:"/pages/quanzi_aticle/list"})},R=()=>{E()||r({url:"/pages/quanzi_like/list"})},h=()=>{E()||r({url:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback"})},H=async()=>{if(!y.value)return;const a=await Z.collection("quanzi_aticle").where("user_id == $cloudEnv_uid").count();v.value.artNum=a.result.total;const l=await Z.collection("quanzi_aticle").where("user_id == $cloudEnv_uid").groupBy("user_id").groupField("sum(like_count) as totalScore").get();v.value.likeNum=l.result.data[0].totalScore;const e=await Z.collection("quanzi_comment").where("user_id == $cloudEnv_uid && comment_status == 1").count();v.value.comment=e.result.total};return(a,l)=>{const e=m,f=c,d=k(I("uni-dateformat"),p),r=g;return s(),t(f,null,{default:A((()=>[u(f,{class:"user"},{default:A((()=>[u(f,{class:"top"},{default:A((()=>[u(f,{class:"group",onClick:z},{default:A((()=>[u(f,{class:"userinfo"},{default:A((()=>[u(f,{class:"pic"},{default:A((()=>[i(y)&&i(N).avatar_file&&i(N).avatar_file.url?(s(),t(e,{key:0,src:i(N).avatar_file.url,mode:"aspectFill"},null,8,["src"])):(s(),t(e,{key:1,src:M,mode:"aspectFill"}))])),_:1}),i(y)?(s(),t(f,{key:0,class:"text"},{default:A((()=>[u(f,{class:"nickname"},{default:A((()=>[o(n(i(N).nickname||i(N).username||i(N).mobile),1)])),_:1}),u(f,{class:"year"},{default:A((()=>[u(d,{date:i(N).register_date,threshold:[3600,3122064e6]},null,8,["date"]),o(" 注册")])),_:1})])),_:1})):(s(),t(f,{key:1,class:"text"},{default:A((()=>[u(f,{class:"nickname"},{default:A((()=>[o("点击登录")])),_:1})])),_:1}))])),_:1}),u(f,{class:"more"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1}),u(f,{class:"bg"},{default:A((()=>[i(y)&&i(N).avatar_file&&i(N).avatar_file.url?(s(),t(e,{key:0,src:i(N).avatar_file.url,mode:"aspectFill"},null,8,["src"])):(s(),t(e,{key:1,src:M,mode:"aspectFill"}))])),_:1})])),_:1}),u(f,{class:"main"},{default:A((()=>[u(f,{class:"info"},{default:A((()=>[u(f,{class:"item"},{default:A((()=>[u(r,null,{default:A((()=>[o(n(v.value.likeNum),1)])),_:1}),o("获赞")])),_:1}),u(f,{class:"item"},{default:A((()=>[u(r,null,{default:A((()=>[o(n(v.value.comment),1)])),_:1}),o("评论")])),_:1}),u(f,{class:"item"},{default:A((()=>[u(r,null,{default:A((()=>[o(n(v.value.artNum),1)])),_:1}),o("发文")])),_:1})])),_:1}),u(f,{class:"list"},{default:A((()=>[u(f,{class:"group"},{default:A((()=>[u(f,{class:"item",onClick:B},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-24-bianji"}),u(r,{class:"text"},{default:A((()=>[o("我的长文")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1}),u(f,{class:"item",onClick:R},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-106-xihuan"}),u(r,{class:"text"},{default:A((()=>[o("我的点赞")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1}),u(f,{class:"item"},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-21-xiugai"}),u(r,{class:"text"},{default:A((()=>[o("评论过的")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1})])),_:1}),u(f,{class:"group"},{default:A((()=>[u(f,{class:"item"},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-32-wenjian"}),u(r,{class:"text"},{default:A((()=>[o("关于")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1}),u(f,{class:"item",onClick:h},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-5-xinxi"}),u(r,{class:"text"},{default:A((()=>[o("意见反馈")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1})])),_:1}),u(f,{class:"group"},{default:A((()=>[u(f,{class:"item",onClick:D},{default:A((()=>[u(f,{class:"left"},{default:A((()=>[u(r,{class:"iconfont icon-a-73-tuichu"}),u(r,{class:"text"},{default:A((()=>[o("退出登录")])),_:1})])),_:1}),u(f,{class:"right"},{default:A((()=>[u(r,{class:"iconfont icon-a-10-you"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-d83e31d0"]]);export{Z as default};
